(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(n,e,t){},41:function(n,e,t){"use strict";t.r(e);var r=t(3),c=t(2),o=t(16),u=t.n(o),i=t(4),a=t.n(i),s="/api/persons",l=function(){return a.a.get(s).then((function(n){return n.data}))},d=function(n){return a.a.post(s,n).then((function(n){return n.data}))},f=function(n,e){return a.a.put("".concat(s,"/").concat(n),e).then((function(n){return n.data}))},j=function(n){return a.a.delete("".concat(s,"/").concat(n)).then((function(n){return n.data}))},m=t(0),b=function(n){var e=n.addHandler,t=Object(c.useState)(""),o=Object(r.a)(t,2),u=o[0],i=o[1],a=Object(c.useState)(""),s=Object(r.a)(a,2),l=s[0],d=s[1],f=function(){i(""),d("")};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Add new person or update existing person"}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:u,onChange:function(n){return i(n.target.value)}})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:l,onChange:function(n){return d(n.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",onClick:function(n){n.preventDefault(),e({name:u,number:l},f)},children:"add / update"})})]})]})},h=(t(40),function(n){var e=n.statusMessage,t=e.isError,r=e.msg;if(null===r||0===r.length||null===t)return null;var c="status-message ".concat(t?"error":"");return Object(m.jsx)("div",{className:c,children:r})}),v=function(n){var e=n.person,t=n.removePerson,r=e.name,c=e.number;e.id;return Object(m.jsxs)("li",{children:[r," ",c," ",Object(m.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]})},p=function(n){var e=n.persons,t=n.filterInput,r=n.removePerson,c=t.trim().length>0?e.filter((function(n){return function(n){return n.name.toLowerCase().includes(t.toLowerCase())||n.number.toLowerCase().includes(t.toLowerCase())}(n)})):e;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)("ul",{children:c.map((function(n){return Object(m.jsx)(v,{person:n,removePerson:r},n.name)}))})]})},O=function(n){var e=n.filterInput,t=n.setFilterInput;return Object(m.jsx)("form",{children:Object(m.jsxs)("div",{children:["filter persons with: ",Object(m.jsx)("input",{value:e,onChange:function(n){return t(n.target.value)}})]})})},x=function(){var n=Object(c.useState)([]),e=Object(r.a)(n,2),t=e[0],o=e[1],u=Object(c.useState)(""),i=Object(r.a)(u,2),a=i[0],s=i[1],v=Object(c.useState)({isError:null,msg:""}),x=Object(r.a)(v,2),g=x[0],E=x[1];Object(c.useEffect)((function(){l().then((function(n){return o(n)}))}),[]);var w=function(n){P(n)?d(n).then((function(n){o(t.concat(n)),k("Person ".concat(n.name," added succesfully"))})).catch((function(e){S("Error: couldn't add person named ".concat(n.name,". ").concat(e))})):alert("Name and phone number are required for person")},C=function(n,e){I("update",e.name)&&f(n,e).then((function(n){var e=t.filter((function(e){return e.id!=n.id}));o(e.concat(n)),k("Person ".concat(n.name," updated succesfully"))})).catch((function(n){S("Error: couldn't update person named ".concat(e.name,". ").concat(n))}))},y=function(n){return t.find((function(e){return e.name===n}))},P=function(n){var e,t;return(null===n||void 0===n||null===(e=n.name)||void 0===e?void 0:e.length)>0&&(null===n||void 0===n||null===(t=n.number)||void 0===t?void 0:t.length)>0},I=function(n,e){return window.confirm("Are you sure you want to ".concat(n," person ").concat(e,"?"))},k=function(n){E({isError:!1,msg:n}),setTimeout((function(){return E({isError:!1,msg:""})}),5e3)},S=function(n){E({isError:!0,msg:n}),setTimeout((function(){return E({isError:!1,msg:""})}),5e3)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(O,{filterInput:a,setFilterInput:s}),Object(m.jsx)(b,{addHandler:function(n,e){var t=y(n.name);t?C(t.id,n):w(n),e()}}),Object(m.jsx)(h,{statusMessage:g}),Object(m.jsx)(p,{persons:t,removePerson:function(n){I("remove",n.name)&&j(n.id).then((function(e){o(t.filter((function(e){return e.id!=n.id}))),k("Person ".concat(n.name," removed succesfully"))})).catch((function(e){var r;404===(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.status)?(S("Error: person ".concat(n.name," allready removed from the server.")),o(t.filter((function(e){return e.id!=n.id})))):S("Error: couldn't remove person named ".concat(n.name,". ").concat(e))}))},filterInput:a})]})};u.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.9ed8159e.chunk.js.map